# Distributed Web System Learning Note

## 服务的路由和负载均衡

### 服务的演变
    * 通过Zookeeper 来实现服务动态注册、机器上线与下线的动态感知，扩容方便，容错性好，无中心化结构能够解决之前使用负载均衡设备所带来的单点故障问题。

### 负载均衡算法
    * 轮询（Round Robin）将请求按顺序轮流第分配到后端服务器上，它均衡地对待后端每一台服务器，不关心服务器实际的连接数和当前的系统负载。
    * 随机法（Random）根据后端服务器列表的大小值来随机选取其中一台进行访问。由概率论看相当于轮询效果。
    * 源地址哈洗法（Hash）获取客户端访问的IP地址，通过Hash 函数计算一个数值，用该数值队服务器列表的大小进行取模运算，得到的就是要访问的服务器的编号。在后端服务器列表不变的情况下，同一IP地址的客户端，每次访问的服务器是同样的。
    * 加权轮询法（Weight Round Robin）根据后端服务器的配置等不同，赋予不同的权重，然后将请求按顺序按照权重分配到后端。
    * 加权随机法（Weight Random）按照权重来随机选取服务器。
    * 最小连接数（Least Connections）动态地选取其中当前积压连接数量最少的一台服务器来处理当前请求。
